<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xml" href="http://localhost:4000/feed.xslt.xml"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="http://jekyllrb.com" version="3.3.1">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2018-11-03T14:28:22+01:00</updated><id>http://localhost:4000//</id><title type="html">Tommys Blog</title><subtitle>This is a very sporadic blog where I post things when I feel like it. Most things here will be development oriented. 
</subtitle><entry><title type="html">The_horrors_of_being_a_JetBrains_Customer</title><link href="http://localhost:4000/2018/11/03/The_horrors_of_being_a_JetBrains_Customer.html" rel="alternate" type="text/html" title="The_horrors_of_being_a_JetBrains_Customer" /><published>2018-11-03T13:40:04+01:00</published><updated>2018-11-03T13:40:04+01:00</updated><id>http://localhost:4000/2018/11/03/The_horrors_of_being_a_JetBrains_Customer</id><content type="html" xml:base="http://localhost:4000/2018/11/03/The_horrors_of_being_a_JetBrains_Customer.html">&lt;p&gt;I've been using IntelliJ IDEA from JetBrains for many years. It has been a very good tool and still is. More recently I also purchased a subscription of YouTrack which I also find to be a very nice product, much better than Atlassians JIRA.&lt;/p&gt;

&lt;p&gt;I’ve been very satisfied with JetBrains customer service for a long time also, but something have clearly happened both on the developer side and customer side. A clear degradation.&lt;/p&gt;

&lt;p&gt;My YouTrack subscription and my IDEA subscription were comming to a renewal point, and I had to change payment method due to a new credit card. Now on account.jetbrains.com, my IDEA and YouTrack where on different payment methods and I wanted to join them to the same which was far from clear how to do. I had a lot of communication with JetBrains support. There were problems both getting them to use the same payment method and updating the card info in the payment method. It took several rounds to make this at least seemingly happen. It was JetBrains support that helped me get this right and they ensured me it now was correct.&lt;/p&gt;

&lt;p&gt;Then suddenly I got a mail about my YouTrack expiring and that I needed a payment method. I now only had one and it should be the payment method of both tools. I did get a bit angry at them when this came shortly after we fixed this, and I wrote them about it. They actually called me back on my phone and ensured me that everything was OK!&lt;/p&gt;

&lt;p&gt;Now I’m locked out of YouTrack, and my IDEA license has also expired without a possibility to renew, and that is not possible with YouTrack either since it is completely gone from my account. So this resulted in new mail conversations where I have to admit to being really, really angry! This has been grossly incompetently handled by the “JetBrains”, whose name now feels laughable.&lt;/p&gt;

&lt;p&gt;It was not I, but JetBrains that put me in this position. I have really tried to resolve this, and JetBrains have confirmed that everything is OK, and then I’m locked out for not paying when there is a perfectly valid payment method on my account.&lt;/p&gt;

&lt;p&gt;This is of course not acceptable behavior for any business that actually wants to have customers. I suspect that the “jet” brains have reached a level of arrogance that makes them believe that they can treat customers in any way and still keep them. Very unfortunately they might be right. They are competing with a commercial product against 2 open source products, and theirs is the most popular one! I’ll give them that. But treating their customers like crap must have an effect in the end. JetBrains are in need of serious competition!&lt;/p&gt;

&lt;p&gt;Unfortunately I cannot just go to the JB store an purchase a new IDEA license. That will start me over att full price! It wasn’t me, but JetBrains that let my subsription run out. There is a very valid payment method on my account. That their own home written systems doesn’t work is entirely their fault. I’m also still locked out of YouTrack and can’t do anything about it this being a saturday and JetBrains apparently have 0 people on the support during weekends.&lt;/p&gt;</content><summary type="html">I've been using IntelliJ IDEA from JetBrains for many years. It has been a very good tool and still is. More recently I also purchased a subscription of YouTrack which I also find to be a very nice product, much better than Atlassians JIRA.</summary></entry><entry><title type="html">Using vertx3-eventbus-client from Typescript.</title><link href="http://localhost:4000/typescript/solution/vertx3/2017/08/13/Using_vertx3-eventbus-client__and_other_JS_code__from_Typescript..html" rel="alternate" type="text/html" title="Using vertx3-eventbus-client from Typescript." /><published>2017-08-13T19:08:12+02:00</published><updated>2017-08-13T19:08:12+02:00</updated><id>http://localhost:4000/typescript/solution/vertx3/2017/08/13/Using_vertx3-eventbus-client__and_other_JS_code__from_Typescript.</id><content type="html" xml:base="http://localhost:4000/typescript/solution/vertx3/2017/08/13/Using_vertx3-eventbus-client__and_other_JS_code__from_Typescript..html">&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;p&gt;Being a long time server side developer I’ve decided to learn a bit of client side also, starting with Angular 2 which forced me into Typescript also. Angular 2 have been more or less straight forward, but Typescript less so. Maybe because it is relatively new and there is not so much info when googling on things. In general I really like Typescript. Being a Java developer I feel more at home with Typescript than Javascript.&lt;/p&gt;

&lt;p&gt;I decided that rather than playing with dummy code to learn I’ll redo a web app I already have, done in Vaadin. That gives me a very clear specification what to do. Vaading of course requires a JEE webcontainer since it uses servlets. With the years, I’m liking JEE less and less. It is starting to feel like an neccesarry evil that can’t be avoided. I really did not want to use a JEE webcontainer to serve REST calls, I wanted something smaller, less heavy.&lt;/p&gt;

&lt;p&gt;Fortunately I stumbled upon something &lt;strong&gt;wonderful&lt;/strong&gt;: &lt;a href=&quot;http://vertx.io/&quot;&gt;Vertx 3&lt;/a&gt;! Really cool! Really simple to use! So far, just works! The many horrors I’ve experienced with the Eclipse IDE tend to make me turn around and run when I see the word “Eclipse” anywhere, but Vertx is an Eclipse project and I must say that I have the highest respect for the people behind it!&lt;/p&gt;

&lt;p&gt;Having Vertx on the server side made me decide to use the Vertx EventBus for communication between client and server by sending messages both ways. There is an Vertx3-eventbus-client.js available from the Vertx team to make it usable from Javascript both in node.js and in browsers.&lt;/p&gt;

&lt;h2 id=&quot;the-problem&quot;&gt;The problem&lt;/h2&gt;

&lt;p&gt;&lt;em&gt;Now came my big problem:&lt;/em&gt; I’m coding the client with Angular 2 and Typescript, not Javascript! Since Typescript transpiles (I have found no spellchecker that accepts this as a word) the Typescript code into Javascript code. So in the end it is all Javascript, so this should be trivial, right?&lt;/p&gt;

&lt;p&gt;No! The vertx3-eventbus-client documentation said do:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-typescript&quot; data-lang=&quot;typescript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;eb&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;EventBus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/eventbus&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{...});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;So I tried:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-typescript&quot; data-lang=&quot;typescript&quot;&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;EventBus&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'vertx3-eventbus-client'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;eventBus&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;EventBus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/eventbus&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Which resulted in&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-typescript&quot; data-lang=&quot;typescript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;vertx3_eventbus_clinet_1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;EventBus&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;I did get the following to work:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-typescript&quot; data-lang=&quot;typescript&quot;&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;eventBus&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;EventBus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8080/eventbus&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Note that the &lt;em&gt;new&lt;/em&gt; keyword is gone! Here it actually created an instance and it tried to connect! However, as soon as I replaced the hardcoded arguments with variables I got an error very similar to the first error:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-typescript&quot; data-lang=&quot;typescript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;vertx3_eventbus_clinet_1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;EventBus&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;So I decided that this was probably not the correct way to do it. So I googled, googled, and googled. In the end I was able to add some puzzle pieces of using the Typescript &lt;em&gt;declare&lt;/em&gt; keyword. This keyword is apparently there just to handle such situations. You have to &lt;em&gt;declare&lt;/em&gt; the Javascript “object” to Typescript.&lt;/p&gt;

&lt;p&gt;Importing the &lt;em&gt;EventBus&lt;/em&gt; was also wrong way to go since when run vertx3-eventbus-client.js did not provide what was expected.&lt;/p&gt;

&lt;h2 id=&quot;the-solution&quot;&gt;The solution&lt;/h2&gt;

&lt;p&gt;I did start with something else, don’t remember what, that failed to include all dependencies, but when I switched to WebPack I was able to get all dependencies into my bundle.js only requiring a very simple index.html.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;APS Admin Web&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;charset=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;viewport&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;width=device-width, initial-scale=1&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;static/adminweb-bundle.js&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;aps-admin-web&amp;gt;&lt;/span&gt;Loading...&lt;span class=&quot;nt&quot;&gt;&amp;lt;/aps-admin-web&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;hr/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;&amp;lt;!--&amp;lt;router-outlet&amp;gt;&amp;lt;/router-outlet&amp;gt;--&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt; 
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;I at first tried the following:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-typescript&quot; data-lang=&quot;typescript&quot;&gt;&lt;span class=&quot;kr&quot;&gt;declare&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;EventBus&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onerror&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;address&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;headers&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kr&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;replyCallback&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;publish&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;address&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;headers&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kr&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;registerHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;address&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;headers&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kr&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;unregisterHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;address&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;headers&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kr&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;This of course did not work! Probably because I’m declaring a Typescript class of something that isn’t a Typescript compatible JS code.&lt;/p&gt;

&lt;p&gt;So this was a complete bust! So, what to do then ? When failing, pick yourself up and try again, and again util success or something like that. Well my first fail was at googling, so I tried that again, and … &lt;a href=&quot;https://gist.github.com/benorama/93373c3c1c3574732d6cc1b4754aab9f&quot;&gt;Success&lt;/a&gt;! It was actually through &lt;a href=&quot;https://github.com/vert-x3/vertx-stack/issues/61#issuecomment-295259388&quot;&gt;this&lt;/a&gt; were mikeagarza posted the link. The class is created by &lt;a href=&quot;https://gist.github.com/benorama&quot;&gt;benorama&lt;/a&gt; (Benoit Hediard). Thanks for that!&lt;/p&gt;

&lt;p&gt;Here is the small code I used to test:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-typescript&quot; data-lang=&quot;typescript&quot;&gt;        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;eventBusProvider&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;EventBusService&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;eventBusProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://192.168.1.60:9080/eventbus/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;headers&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kr&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;headers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;eventBusProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;publish&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;aps.adminweb&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;{\&quot;content\&quot;: \&quot;Hello!\&quot;}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;I have verified that I can connect and send a message that does arrive using this. This is a clean implementation of the Vertx event bus client done entirely in Typescript. It does not take any args in the constructor, but have a &lt;code class=&quot;highlighter-rouge&quot;&gt;connect(...)&lt;/code&gt; method instead to make it Angular2 injectable. Very nice.&lt;/p&gt;

&lt;p&gt;The following server code sets up the bridge (Groovy code!):&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-groovy&quot; data-lang=&quot;groovy&quot;&gt;            &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
            &lt;span class=&quot;kt&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inboundPermitted&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;address:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;aps.adminweb&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;kt&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;outboundPermitted&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;address:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;aps.adminweb&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;kt&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
                    &lt;span class=&quot;nl&quot;&gt;inboundPermitteds:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inboundPermitted&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;],&lt;/span&gt;
                    &lt;span class=&quot;nl&quot;&gt;outboundPermitteds:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outboundPermitted&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;

            &lt;span class=&quot;c1&quot;&gt;// Note that this router is already bound to an HTTP server!&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;SockJSHandler&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sockJSHandler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SockJSHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;vertx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;sockJSHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;bridge&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 
            &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;router&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;route&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/eventbus/*&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sockJSHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;</content><summary type="html">Intro</summary></entry><entry><title type="html">2 Angular 2 Books</title><link href="http://localhost:4000/jekyll/update/2017/01/31/Angular2_books.html" rel="alternate" type="text/html" title="2 Angular 2 Books" /><published>2017-01-31T20:17:00+01:00</published><updated>2017-01-31T20:17:00+01:00</updated><id>http://localhost:4000/jekyll/update/2017/01/31/Angular2_books</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2017/01/31/Angular2_books.html">&lt;h2 id=&quot;angular-2-by-example-&quot;&gt;Angular 2 By Example (+)&lt;/h2&gt;

&lt;p&gt;This book seem to be from an for me unknown publisher: Packt. It is written by two persons and have at least one proofreader.&lt;/p&gt;

&lt;p&gt;My first impression of this book was good, but that however changed. The book &lt;strong&gt;requires&lt;/strong&gt; you as the reader to have a computer with the book code checked out from Github and have it available as you are reading. There are references to the github code that are not in the book, so you need both to be able to follow. I accepted that, and sat with my laptop in my knee while I read.&lt;/p&gt;

&lt;p&gt;After a while however I came to the conclusion that the structure of the book made it more or less impossible to use as a reference. On top of that I made the huge misstake of bying it from Amazon for the Kindle. At least the Kindle app is not made for such technical books. When you want to go back and forth it is annoyingly difficult with Kindle. I can however not blame the book authors for this.&lt;/p&gt;

&lt;p&gt;I however discovered a lot of errors, spelling mistakes, and pure typos. After a while the book felt like it had been pushed out quickly and not proofread by anyone.&lt;/p&gt;

&lt;p&gt;The structure of the example app the book used as example was also a bit messy in my opinion, and the book/examples did not show the optimal setup for developing. When transpiling (TypeScript –&amp;gt; JavaScript) there were tons of error messages, so many that the scrollback buffer of the terminal got full. In the end the examples did work, but all those error messages bothered me.&lt;/p&gt;

&lt;p&gt;In the end I gave upp and went looking at Manning.com:&lt;/p&gt;

&lt;h2 id=&quot;angular-2-development-with-typescript-&quot;&gt;Angular 2 Development with TypeScript (++++)&lt;/h2&gt;

&lt;p&gt;I apparenlty did forget that all technical books should be purchased from Manning directly, not from Amazon (not sure if Amazon sells Manning books either), since when shopping at Manning you get the books in EPub, Kindle, and PDF formats. And after comparing EPub to PDF, PDF wins large since PDF seems flexible enough to handle both text and symbols, arrows, etc in a page anywhere on the page. For the EPub version of the book, most code examples hade been converted to images that when sized to fit the page got fuzzy. EPub apparently does not handle text and graphics in a flexible way on a page. Manning has also been briliant in handling the PDF format. It was not encrypted, and I was not sent a password by SMS :-). At the bottom of every page they have added “Licensed to Tommy Svensson &lt;a href=&quot;mailto:tommy@natusoft.se&quot;&gt;tommy@natusoft.se&lt;/a&gt;”. That makes sure I don’t share the PDF with anyone :-).&lt;/p&gt;

&lt;p&gt;Anyhow this book I really liked from the start, and I still like it! It has a much better structure of the book, it is usable as a reference, and the example code on github does transpile and run without any errors what so ever! At least so far. I still have a few chapters left to read, but I’m about to jump in and start coding a bit before I continue. The book explains differences in ES5, ES6, and TypeScript and shows example of the same code in all 3 variants early in the book. Otherwise it is only TypeScript that is used in the book.&lt;/p&gt;

&lt;p&gt;This book is easy to read, the example code in the book (and the github code) is very clear and easy to read. They provide arrows to different code lines with text explaining that part of the code. Also in places where code lines are to long to fit on a page line, they clearly show that the next line is a wrap from the previous and is thus part of the same line. The authors really know and understand that they are teaching! This book has 2 authors and 10+ reviewers! There were some small misstakes in the start of the book in some code examples. I started reading the EPub version but then switched to PDF. I suspect that the image-ified code examples in the EPub version were done before the final reviews, and some code were updated without updating the image variants. I’m failing to find the code errors early in the book in the the EPub, in the PDF.&lt;/p&gt;

&lt;p&gt;The book also provide a development setup where the transpiling from TypeScript into JavaScript is automatic so that you can just code in TypeScript, and run. This is very nice for development, but of course the code should be transpiled manually before release version.&lt;/p&gt;

&lt;p&gt;The authors seem very experienced and seems to know what they are talking about. I did not get that impression with the first book.&lt;/p&gt;

&lt;p&gt;I can really recommend this book. &lt;strong&gt;Note&lt;/strong&gt; that if you are like me and wants to make annotations and highlights in the book, then you need a good PDF tool. On Mac for example, Preview is not good enough! This will cost you more than the book did even if you avoid Adobe! This is the only catch with PDF.&lt;/p&gt;</content><summary type="html">Angular 2 By Example (+)</summary></entry><entry><title type="html">A Logical View of writing test code</title><link href="http://localhost:4000/jekyll/update/2016/12/01/A_Logical_View_of_writing_test_code.html" rel="alternate" type="text/html" title="A Logical View of writing test code" /><published>2016-12-01T11:49:36+01:00</published><updated>2016-12-01T11:49:36+01:00</updated><id>http://localhost:4000/jekyll/update/2016/12/01/A_Logical_View_of_writing_test_code</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2016/12/01/A_Logical_View_of_writing_test_code.html">&lt;h1 id=&quot;a-logical-view-of-writing-test-code&quot;&gt;A Logical View of writing test code&lt;/h1&gt;

&lt;p&gt;I continually get, well … shocked, in many cases when I see test code! There are tests for anything and everything, including that java works, that it is possible to add 2 ints and get an int back, etc. Nothing is taken as a given fact, and every single method gets tested no matter what it does. Testing at ridiculous levels does not give you anything, and I would claim do more harm than good.&lt;/p&gt;

&lt;p&gt;I want to provide another view of automatic code testing, thinking logically. I’ll start with 2 questions:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;em&gt;What is the difference between the main code being tested, and the test code ?&lt;/em&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;em&gt;How do you measure the quality of the test code ?&lt;/em&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;You do write test code because you don’t know if the main code really does what you intended it to do, that you haven’t made any errors or other mistakes. You also want your test code to protect you in future refactorings. So, how do you accomplish this ? Do you just write your test code, run it, and when it works say “OK, now I believe everything is perfect, now I’m done!” ? If so, what makes you sure ? Personally, I’m an atheist, I don’t take anything on belief. To me if someone says “I now believe this is done!”, I interpret it as “I really don’t know if this is done, but I sincerely hope so”. I also read into this, that people who express themselves like that, really doesn’t know how to become sure. Well, you can never be really sure, but can reach a higher confidence level.&lt;/p&gt;

&lt;p&gt;Why can’t you be sure ? This leads to my first question, “What is the difference between the main code being tested, and the test code ?”. The answer is “&lt;em&gt;Nothing&lt;/em&gt;”! They are both just code. They both have the purpose of providing functionality. So what makes the test code have higher quality than the code tested ? The answer is again “Nothing”! How do you know that you haven’t made errors in the test code ? You don’t!&lt;/p&gt;

&lt;p&gt;“Hey, this guy is pessimistic! Is he really saying tests are worthless ?” No, I’m not! Tests are not worthless, they are very useful and a good thing to have. But you have to accept that there are no plain main code and magic test code.&lt;/p&gt;

&lt;p&gt;This brings on the second question, “&lt;em&gt;How do you measure the quality of the test code ?&lt;/em&gt;”. The only way I have found is: over time. The more you change the main code without touching the test code, and the test code does its job, the more sure you can be about its quality. “But wait, I always have to modify and sometimes redo the test code when I make larger changes and refactorings!”, some people will say. If so, why is that ? Testing at too low levels maybe ? What I wan’t to get out of my tests is to verify the main functionality, and I do that at public API levels. That is, places in the code that are least likely to change, and when they change the changes are usually minor. Thereby I can do a lot of stuff lower down, and if the test still tells me that I haven’t broken anything, then I feel more and more confident over time that, it is true. Anytime I have to modify test code it goes down on the quality scale again.&lt;/p&gt;

&lt;p&gt;“&lt;em&gt;Every single method must have a test!&lt;/em&gt;” Ehh … NO! It does not, for quite obvious reasons. I’ve seen tests that test one line methods printing a log message! I’ve seen tests that does nothing else than verify that Java is capable of doing integer math … A lot of people take test code coverage to mean just that you should have a test for every single method. They don’t seem to consider that when you place the tests higher up, they still run and test the lower code. And if a code coverage tool tells you that there are untested code (code that did not get executed during the test), then you should ask yourself, is that code really used ? Have I covered all functionality variants ? Is my code too complex ? If you put a test on every single method, you will never get that feedback.&lt;/p&gt;</content><summary type="html">A Logical View of writing test code</summary></entry></feed>
